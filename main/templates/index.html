{% extends 'base.html' %}
{% load static %}
{% block cssload %}{% static 'css/index.css' %}{% endblock %}
{% block head %}
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script>
    <script src="http://malsup.github.com/jquery.form.js"></script>

    <script>
        function f(name) {
            alert(name)
        }
    </script>
{% endblock %}
{% block body %}
    <div id="mini-cart"></div>
    <div id="goods"></div>
    {% if success %}
        <div class="alert alert-success" role="alert">
            Реєстрація пройшла успішно!
        </div>
    {% elif login_success %}
        <div class="alert alert-success" role="alert">
            Ви успішно ввійшли!
        </div>
    {% endif %}
    <div class="alert alert-success" role="alert" id="order">
    </div>
    {% for i in costumes %}
        <div class="single-goods">
            <h3 id="name">{{ i.costume_name }}</h3>
            <p>Ціна: {{ i.costume_price }}</p>
            <img src={{ i.costume_image }}>
            <button class="add" type="submit" data-name="{{ i.id }}">
                Додати в корзину
            </button>
        </div>
    {% endfor %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            $(".add").on("click", function (event) {
                event.preventDefault();
                let text = $(this).attr("data-name");
                $.ajax({
                    type: "POST",
                    url: '/add',
                    data: {
                        'id': text
                    },
                    success: function (data) {
                        console.log(data.addedCostume);
                        $('#order').html(`Ви успішно добавили ${data.addedCostume}`).show("slow").delay(800).hide(800, function () {
                            $(this).remove("slow")

                        })
                    }
                })
            });
        });
    </script>
{% endblock %}